# -*- mode: ruby -*-
# vi: set ft=ruby :


Vagrant.configure("2") do |config|

  config.vm.box = "mrlesmithjr/windows2016"
  config.vm.box_version = "1543402017"

  config.vm.network "forwarded_port", guest: 80, host: 8080
  config.vm.network :private_network, ip: "192.168.58.64"
  config.vm.network :forwarded_port, guest: 5985, host: 5986
  config.vm.communicator = "winrm"
  config.winrm.retry_limit = 30
  config.winrm.retry_delay = 10
  

  config.vm.synced_folder "./", "/vagrant_data", automount: true

  config.vm.provider "virtualbox" do |vb|
    vb.memory = "3096"
    vb.gui = "true"
  end

  #first shell script installs choco pckage manager and nuget package provider
  config.vm.provision "shell", path: "./scripts/bootstrap.ps1"

  #second shell script compiles and applies the dsc configuration script to the host.
  config.vm.provision "shell", path: "./scripts/Config.ps1"




end
